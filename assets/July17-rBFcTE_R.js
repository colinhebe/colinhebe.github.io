import{r as N,j as r,R as d}from"./index-fc9MRa2S.js";import _ from"./play-DqyIa7YZ.js";function F(p=!0){N.useEffect(()=>{if(!p)return;const a=document.body.style.overflow;document.body.style.overflow="hidden";const o=document.createElement("div");return o.id="scroll-blocker",o.style.cssText=`
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      z-index: 9999;
      background: transparent;
      pointer-events: none; 
      touch-action: none;   
    `,document.body.appendChild(o),()=>{document.body.style.overflow=a,o.remove()}},[p])}const g=32,T=16;function U(){const[p,a]=N.useState({x:0,y:0}),o=N.useRef({startX:0,startY:0,active:!1});function v(x){x.stopPropagation();const m=x.touches[0];o.current={startX:m.clientX,startY:m.clientY,active:!0},a({x:0,y:0})}function u(x){if(x.stopPropagation(),!o.current.active)return;const m=x.touches[0],b=m.clientX-o.current.startX,k=m.clientY-o.current.startY,E=Math.max(-g,Math.min(g,b)),j=Math.max(-g,Math.min(g,k)),l=E/g,c=j/g;a({x:l,y:c})}function w(x){x.stopPropagation(),o.current.active=!1,a({x:0,y:0})}return{Joystick:r.jsx("div",{className:"w-32 h-32 flex items-center justify-center z-20 pointer-events-auto  bg-gray-100 rounded-full relative",onTouchStart:v,onTouchMove:u,onTouchEnd:w,children:r.jsx("div",{className:"w-16 h-16 bg-gray-500 rounded-full",style:{position:"absolute",width:`${T*4}px`,height:`${T*4}px`,left:p.x*g+g,top:p.y*g+g}})}),joystickPosition:p}}class K{x;y;vx;vy;constructor(a,o,v,u){this.x=a,this.y=o,this.vx=v,this.vy=u}move(a,o){this.x+=this.vx,this.y+=this.vy,this.x<0&&(this.x+=a),this.x>a&&(this.x-=a),this.y<0&&(this.y+=o),this.y>o&&(this.y-=o)}}class B extends K{shape;rotation;rotationSpeed;size;constructor(a,o,v,u){super(a,o,v,u);const w=Math.floor(Math.random()*3)+5;this.size=3+Math.random()*8;const S=this.size;this.shape=Array.from({length:w},(x,m)=>{const b=m/w*2*Math.PI,k=Math.cos(b)*S*(.8+Math.random()*.4),E=Math.sin(b)*S*(.8+Math.random()*.4);return`${k},${E}`}).join(" "),this.rotation=Math.random()*360,this.rotationSpeed=(Math.random()-.5)*2}move(a,o){super.move(a,o),this.rotation=(this.rotation+this.rotationSpeed)%360}render(){return r.jsx("polygon",{points:this.shape,transform:`translate(${this.x},${this.y}) rotate(${this.rotation}) `,fill:"gray",stroke:"black",strokeWidth:2})}}class V extends d.Component{render(){const{x:a,y:o,angle:v}=this.props;return r.jsx("g",{transform:`translate(${a},${o}) rotate(${v}) scale(1)`,children:r.jsx("g",{transform:"translate(-16, -16)",children:r.jsx("svg",{fill:"#fff",width:"32px",height:"32px",viewBox:"0 0 32 32",children:r.jsx("g",{id:"SVGRepo_iconCarrier",children:r.jsx("path",{d:"M23.0649,12.0065C22.034,9.0948,19.2606,7,16,7s-6.034,2.0948-7.0649,5.0065C4.7622,13.2901,2,15.6868,2,18.5 C2,22.7056,8.1494,26,16,26s14-3.2944,14-7.5C30,15.6868,27.2378,13.2901,23.0649,12.0065z M16,9c3.0327,0,5.5,2.4673,5.5,5.5 c0,1.731-0.6533,3.5-5.5,3.5s-5.5-1.769-5.5-3.5C10.5,11.4673,12.9673,9,16,9z M16,24c-7.1782,0-12-2.8438-12-5.5 c0-1.5608,1.6818-3.1773,4.5128-4.2518C8.5099,14.3325,8.5,14.415,8.5,14.5c0,3.6494,2.5234,5.5,7.5,5.5s7.5-1.8506,7.5-5.5 c0-0.085-0.0099-0.1675-0.0128-0.2518C26.3182,15.3227,28,16.9392,28,18.5C28,21.1563,23.1782,24,16,24z M8,18.5 C8,19.3271,7.3271,20,6.5,20S5,19.3271,5,18.5S5.6729,17,6.5,17S8,17.6729,8,18.5z M13,21.5c0,0.8271-0.6729,1.5-1.5,1.5 S10,22.3271,10,21.5s0.6729-1.5,1.5-1.5S13,20.6729,13,21.5z M22,21.5c0,0.8271-0.6729,1.5-1.5,1.5S19,22.3271,19,21.5 s0.6729-1.5,1.5-1.5S22,20.6729,22,21.5z M27,18.5c0,0.8271-0.6729,1.5-1.5,1.5S24,19.3271,24,18.5s0.6729-1.5,1.5-1.5 S27,17.6729,27,18.5z M18,15c0-0.5523,0.4477-1,1-1s1,0.4477,1,1c0,0.5522-0.4477,1-1,1S18,15.5522,18,15z M13,15 c0-0.5522,0.4478-1,1-1h2c0.5522,0,1,0.4478,1,1s-0.4478,1-1,1h-2C13.4478,16,13,15.5522,13,15z"})})})})})}}function H(){return/Mobi|Android|iPhone|iPad|iPod|Windows Phone|webOS/i.test(navigator.userAgent)}function tt(){const[u,w]=d.useState(!1),[S,x]=d.useState(!0),[m,b]=d.useState(0),[k,E]=d.useState(!1),j=d.useRef({up:!1,down:!1,left:!1,right:!1}),l=d.useRef({x:0,y:0}),c=d.useRef({x:0,y:0}),[,P]=d.useState(0),M=d.useRef([]),z=d.useRef(null),[i,D]=d.useState({width:400,height:300}),{joystickPosition:R,Joystick:I}=U();F(u);function Y(e,t){if(e!==0||t!==0){const n=Math.sqrt(e*e+t*t);e/=n,t/=n,c.current.x+=e*.15,c.current.y+=t*.15}else c.current.x*=1-.05,c.current.y*=1-.05;const s=Math.sqrt(c.current.x**2+c.current.y**2);s>4&&(c.current.x=c.current.x/s*4,c.current.y=c.current.y/s*4),l.current.x+=c.current.x,l.current.y+=c.current.y,l.current.x<0&&(l.current.x+=i.width),l.current.x>i.width&&(l.current.x-=i.width),l.current.y<0&&(l.current.y+=i.height),l.current.y>i.height&&(l.current.y-=i.height)}const L={w:"up",ArrowUp:"up",s:"down",ArrowDown:"down",a:"left",ArrowLeft:"left",d:"right",ArrowRight:"right"};d.useEffect(()=>{function e(n,h){const f=L[n.key];f&&(j.current[f]=h,u&&n.preventDefault())}const t=n=>e(n,!0),s=n=>e(n,!1);return window.addEventListener("keydown",t,{passive:!1}),window.addEventListener("keyup",s,{passive:!1}),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",s)}},[u]),d.useEffect(()=>{let e,t=!0,s=0;function n(){if(!u)return;let h=0,f=0;j.current.up&&(f-=1),j.current.down&&(f+=1),j.current.left&&(h-=1),j.current.right&&(h+=1);const C=Math.sqrt(R.x*R.x+R.y*R.y);if(C>0&&(h+=R.x/C,f+=R.y/C),Y(h,f),s++,s>100&&M.current.length<3){s=0;const{x:y,y:G,vx:O,vy:W}=q();M.current.push(new B(y,G,O,W))}if(M.current.forEach(y=>y.move(i.width,i.height)),M.current=M.current.filter(y=>y.x>=0&&y.x<=i.width&&y.y>=0&&y.y<=i.height),J()){w(!1),E(!0);return}P(y=>y+1),t&&u&&(e=requestAnimationFrame(n))}return u&&(e=requestAnimationFrame(n)),()=>{t=!1,e&&cancelAnimationFrame(e)}},[u,i,R]),d.useEffect(()=>{let e;if(u){const t=Date.now()-m;e=setInterval(()=>{b(Date.now()-t)},10)}else clearInterval(e);return()=>clearInterval(e)},[u]);const X=c.current.x===0&&c.current.y===0?0:Math.atan2(c.current.y,c.current.x)*180/Math.PI+90,$=e=>{const t=Math.floor(e/36e5),s=Math.floor(e%36e5/6e4),n=Math.floor(e%6e4/1e3),h=e%1e3;return`${t>0?t.toString().padStart(2,"0")+":":""}${s.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}.${h.toString().padStart(3,"0")}`};function J(){for(const t of M.current){const s=t.x-l.current.x,n=t.y-l.current.y;if(Math.sqrt(s*s+n*n)<8+t.size/2)return!0}return!1}function A(){E(!1),x(!0),b(0),l.current={x:i.width/2,y:i.height/2},c.current={x:0,y:0},M.current=[]}d.useEffect(()=>{function e(){if(z.current){const t=z.current.offsetWidth,s=t,n=t*3/4;D({width:s,height:n}),l.current={x:s/2,y:n/2}}}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);function q(){const e=Math.floor(Math.random()*4),t=.3+Math.random()*1.5;let s=0,n=0,h=0,f=0;switch(e){case 0:s=Math.random()*i.width,n=0,h=(Math.random()-.5)*t,f=t;break;case 1:s=i.width,n=Math.random()*i.height,h=-t,f=(Math.random()-.5)*t;break;case 2:s=Math.random()*i.width,n=i.height,h=(Math.random()-.5)*t,f=-t;break;case 3:s=0,n=Math.random()*i.height,h=t,f=(Math.random()-.5)*t;break}return{x:s,y:n,vx:h,vy:f}}return r.jsxs("div",{className:`p-6 rounded-xl border-2 border-dotted flex flex-col items-center
    border-black bg-gradient-to-br from-gray-400 via-gray-100 to-white shadow-lg`,ref:z,children:[r.jsxs("div",{className:"relative w-full",children:[r.jsx("p",{className:"text-center font-hand text-2xl text-gray-900",children:"Space Shooter"}),r.jsx("div",{className:`absolute right-0 top-0 m-0 p-2 bg-white rounded shadow font-mono text-sm ${u?"text-gray-800":"text-red-500"}`,title:"Game duration in milliseconds",children:$(m)})]}),r.jsxs("div",{className:"flex justify-center mt-6 relative p-4",style:{width:i.width,height:i.height},children:[r.jsxs("svg",{className:"w-full h-full bg-gray-800 rounded-lg shadow-lg block",children:[r.jsx(V,{x:l.current.x,y:l.current.y,angle:X}),M.current.map((e,t)=>r.jsx(d.Fragment,{children:e.render()},t))]}),S&&r.jsx("div",{className:"absolute left-0 top-0 w-full h-full flex flex-col items-center justify-center cursor-pointer select-none z-10 backdrop-blur-xs",onClick:()=>{k&&A(),x(!1),w(!0)},children:r.jsx(_,{className:"text-white w-12 h-12"})}),!S&&r.jsx("button",{className:"absolute left-0 top-0 w-full h-full flex flex-col items-center justify-center cursor-pointer select-none z-10",onClick:()=>{x(!0),w(!1)}}),k&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-lg p-4",children:r.jsxs("div",{className:"text-center text-white",children:[r.jsx("p",{className:"text-lg font-semibold mb-2",children:"Game Over"}),r.jsxs("p",{className:"text-sm mb-4",children:["Your time: ",$(m)]}),r.jsx("button",{className:"px-4 py-2 bg-red-500 rounded shadow hover:bg-red-600 transition-all",onClick:A,children:"Restart"})]})})]}),r.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",title:"Edge crossing, physics acceleration and deceleration",children:["Control: AWSD / Arrow keys",r.jsx("p",{children:"July 17, 2025"})]}),!S&&!k&&H()&&r.jsx("div",{className:"absolute bottom-16",children:I})]})}export{tt as default};
